<?xml version="1.0" encoding="UTF-8"?>
<svg width="1000" height="660" viewBox="0 0 1000 660" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1000" height="660" fill="#f5f7fa" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="500" y="40" font-family="Arial, sans-serif" font-size="24" text-anchor="middle" font-weight="bold" fill="#333">SimBioSys Lab Web Application Architecture</text>
  
  <!-- Containers -->
  <rect x="30" y="80" width="940" height="560" fill="#e6f0fa" rx="10" ry="10" stroke="#b3d1f0" stroke-width="2"/>
  <text x="50" y="110" font-family="Arial, sans-serif" font-size="18" fill="#555">Singularity Container</text>

  <!-- Frontend Box -->
  <rect x="60" y="140" width="280" height="220" fill="#ffffff" rx="8" ry="8" stroke="#ccdcec" stroke-width="2"/>
  <text x="200" y="170" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold" fill="#333">Frontend (Next.js)</text>
  
  <!-- Frontend Components -->
  <rect x="80" y="190" width="240" height="40" fill="#e1f5fe" rx="5" ry="5" stroke="#81d4fa" stroke-width="1"/>
  <text x="200" y="215" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#01579b">React Components</text>
  
  <rect x="80" y="240" width="240" height="40" fill="#e1f5fe" rx="5" ry="5" stroke="#81d4fa" stroke-width="1"/>
  <text x="200" y="265" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#01579b">Form Submission</text>
  
  <rect x="80" y="290" width="240" height="40" fill="#e1f5fe" rx="5" ry="5" stroke="#81d4fa" stroke-width="1"/>
  <text x="200" y="315" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#01579b">File Upload Handlers</text>
  
  <!-- Backend Box -->
  <rect x="60" y="380" width="280" height="220" fill="#ffffff" rx="8" ry="8" stroke="#ccdcec" stroke-width="2"/>
  <text x="200" y="410" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold" fill="#333">Backend (Flask)</text>
  
  <!-- Backend Components -->
  <rect x="80" y="430" width="240" height="40" fill="#e8f5e9" rx="5" ry="5" stroke="#a5d6a7" stroke-width="1"/>
  <text x="200" y="455" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#1b5e20">REST API Endpoints</text>
  
  <rect x="80" y="480" width="240" height="40" fill="#e8f5e9" rx="5" ry="5" stroke="#a5d6a7" stroke-width="1"/>
  <text x="200" y="505" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#1b5e20">File Processing</text>
  
  <rect x="80" y="530" width="240" height="40" fill="#e8f5e9" rx="5" ry="5" stroke="#a5d6a7" stroke-width="1"/>
  <text x="200" y="555" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#1b5e20">Job Management</text>
  
  <!-- AllosMod Box -->
  <rect x="400" y="140" width="280" height="220" fill="#ffffff" rx="8" ry="8" stroke="#ccdcec" stroke-width="2"/>
  <text x="540" y="170" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold" fill="#333">AllosMod</text>
  
  <!-- AllosMod Components -->
  <rect x="420" y="190" width="240" height="40" fill="#fff3e0" rx="5" ry="5" stroke="#ffe0b2" stroke-width="1"/>
  <text x="540" y="215" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#e65100">run_allosmod_lib.sh</text>
  
  <rect x="420" y="240" width="240" height="40" fill="#fff3e0" rx="5" ry="5" stroke="#ffe0b2" stroke-width="1"/>
  <text x="540" y="265" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#e65100">Computational Pipeline</text>
  
  <rect x="420" y="290" width="240" height="40" fill="#fff3e0" rx="5" ry="5" stroke="#ffe0b2" stroke-width="1"/>
  <text x="540" y="315" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#e65100">Result Processing</text>
  
  <!-- Storage Box -->
  <rect x="400" y="380" width="280" height="220" fill="#ffffff" rx="8" ry="8" stroke="#ccdcec" stroke-width="2"/>
  <text x="540" y="410" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold" fill="#333">Storage</text>
  
  <!-- Storage Components -->
  <rect x="420" y="430" width="240" height="40" fill="#f3e5f5" rx="5" ry="5" stroke="#e1bee7" stroke-width="1"/>
  <text x="540" y="455" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#4a148c">Upload Directory</text>
  
  <rect x="420" y="480" width="240" height="40" fill="#f3e5f5" rx="5" ry="5" stroke="#e1bee7" stroke-width="1"/>
  <text x="540" y="505" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#4a148c">Job Results</text>
  
  <rect x="420" y="530" width="240" height="40" fill="#f3e5f5" rx="5" ry="5" stroke="#e1bee7" stroke-width="1"/>
  <text x="540" y="555" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#4a148c">Logs</text>
  
  <!-- SLURM Cluster Box -->
  <rect x="720" y="140" width="220" height="460" fill="#ffffff" rx="8" ry="8" stroke="#ccdcec" stroke-width="2"/>
  <text x="830" y="170" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold" fill="#333">SLURM HPC Cluster</text>
  
  <!-- SLURM Components -->
  <rect x="740" y="190" width="180" height="40" fill="#ede7f6" rx="5" ry="5" stroke="#d1c4e9" stroke-width="1"/>
  <text x="830" y="215" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#4527a0">Compute Nodes</text>
  
  <rect x="740" y="240" width="180" height="40" fill="#ede7f6" rx="5" ry="5" stroke="#d1c4e9" stroke-width="1"/>
  <text x="830" y="265" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#4527a0">Job Scheduler</text>
  
  <rect x="740" y="290" width="180" height="40" fill="#ede7f6" rx="5" ry="5" stroke="#d1c4e9" stroke-width="1"/>
  <text x="830" y="315" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#4527a0">Job Queue</text>
  
  <rect x="740" y="340" width="180" height="40" fill="#ede7f6" rx="5" ry="5" stroke="#d1c4e9" stroke-width="1"/>
  <text x="830" y="365" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#4527a0">GPU Resources</text>
  
  <rect x="740" y="390" width="180" height="40" fill="#ede7f6" rx="5" ry="5" stroke="#d1c4e9" stroke-width="1"/>
  <text x="830" y="415" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#4527a0">Resource Manager</text>
  
  <!-- Email Notification -->
  <rect x="740" y="480" width="180" height="80" fill="#ffebee" rx="5" ry="5" stroke="#ffcdd2" stroke-width="1"/>
  <text x="830" y="515" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#b71c1c">Email Notification</text>
  <text x="830" y="535" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#b71c1c">Job Completion</text>
  <text x="830" y="550" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#b71c1c">Result Download Link</text>
  
  <!-- Arrows -->
  <!-- Frontend to Backend -->
  <path d="M200 370 L200 380" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Backend to AllosMod -->
  <path d="M340 450 L400 250" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Backend to Storage -->
  <path d="M340 500 L400 500" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- AllosMod to SLURM -->
  <path d="M680 250 L720 250" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- SLURM to Email -->
  <path d="M830 440 L830 480" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Arrow Marker Definition -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#666"/>
    </marker>
  </defs>
  
  <!-- User Interaction -->
  <rect x="120" y="60" width="160" height="50" fill="#fafafa" rx="25" ry="25" stroke="#ddd" stroke-width="1"/>
  <text x="200" y="90" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#333">User Interaction</text>
  <path d="M200 110 L200 140" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Data Flow Labels -->
  <text x="180" y="375" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">API Requests</text>
  <text x="350" y="340" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Job Submission</text>
  <text x="370" y="500" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">File Storage</text>
  <text x="700" y="230" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Compute Jobs</text>
  <text x="810" y="465" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Job Results</text>
  
  <!-- Legend -->
  <rect x="60" y="620" width="20" height="10" fill="#e1f5fe" rx="2" ry="2" stroke="#81d4fa" stroke-width="1"/>
  <text x="85" y="630" font-family="Arial, sans-serif" font-size="12" fill="#333">Frontend</text>
  
  <rect x="160" y="620" width="20" height="10" fill="#e8f5e9" rx="2" ry="2" stroke="#a5d6a7" stroke-width="1"/>
  <text x="185" y="630" font-family="Arial, sans-serif" font-size="12" fill="#333">Backend</text>
  
  <rect x="260" y="620" width="20" height="10" fill="#fff3e0" rx="2" ry="2" stroke="#ffe0b2" stroke-width="1"/>
  <text x="285" y="630" font-family="Arial, sans-serif" font-size="12" fill="#333">AllosMod</text>
  
  <rect x="360" y="620" width="20" height="10" fill="#f3e5f5" rx="2" ry="2" stroke="#e1bee7" stroke-width="1"/>
  <text x="385" y="630" font-family="Arial, sans-serif" font-size="12" fill="#333">Storage</text>
  
  <rect x="460" y="620" width="20" height="10" fill="#ede7f6" rx="2" ry="2" stroke="#d1c4e9" stroke-width="1"/>
  <text x="485" y="630" font-family="Arial, sans-serif" font-size="12" fill="#333">SLURM Cluster</text>
  
  <rect x="560" y="620" width="20" height="10" fill="#ffebee" rx="2" ry="2" stroke="#ffcdd2" stroke-width="1"/>
  <text x="585" y="630" font-family="Arial, sans-serif" font-size="12" fill="#333">Notifications</text>
</svg>